# 人工审核功能使用指南

## 📝 概述

人工审核功能允许用户对低置信度的自动分类结果进行手动检查和修正，确保内容分类的准确性。

---

## 🎯 什么时候需要人工审核？

系统会自动标记以下情况为"需要审核"：

1. **置信度低于60%** - 自动分类不确定
2. **否定词检测** - 内容包含"fake"、"rumor"等不确定表达
3. **边界案例** - 多个分类分数接近
4. **缺少关键信息** - 内容描述不完整

---

## 🚀 如何使用人工审核功能

### 方法1：主程序交互式菜单

1. 运行主程序：
   ```bash
   python TheWorldOfAI.py
   ```

2. 选择菜单选项 **5. 📝 人工审核分类**

3. 查看审核统计：
   ```
   📊 数据统计:
      总内容数: 100 条
      需要审核: 15 条 (15.0%)
   ```

4. 选择审核模式：
   - **1. 批量审核** - 逐条审核所有低置信度内容
   - **2. 自定义阈值** - 设置不同的置信度阈值（如0.7）
   - **3. 仅查看列表** - 先浏览需要审核的内容

### 方法2：独立使用审核模块

```python
from manual_reviewer import ManualReviewer
from content_classifier import ContentClassifier

# 加载已分类的数据
import json
with open('ai_tracker_data_xxx.json', 'r', encoding='utf-8') as f:
    data = json.load(f)['data']

# 创建审核器
reviewer = ManualReviewer()

# 批量审核
reviewed_data = reviewer.batch_review(data, min_confidence=0.6)

# 保存结果
with open('reviewed_data.json', 'w', encoding='utf-8') as f:
    json.dump(reviewed_data, f, ensure_ascii=False, indent=2)

# 保存审核历史
reviewer.save_review_history()
```

---

## 📋 审核界面说明

### 显示信息
```
======================================================================
📝 内容审核
======================================================================

标题: OpenAI denies rumors about GPT-5 release
来源: TechNews
🔗 链接: https://technews.com/openai-gpt5-rumors
摘要: Company says fake news about launch is false...

当前分类: product
置信度: 45.2%
次要标签: market
技术领域: Generative AI
地区: USA
```

### 操作选项

| 选项 | 说明 | 结果 |
|-----|------|------|
| **1. 保持当前分类** | 确认自动分类正确 | 置信度→100%，标记已审核 |
| **2. 修改分类** | 更改内容类型 | 重新分类，置信度→100% |
| **3. 修改技术领域** | 更改技术标签 | 更新tech_categories |
| **4. 修改地区** | 更改地区分类 | 更新region |
| **5. 标记为垃圾** | 删除无效内容 | 标记is_spam=True |
| **6. 在浏览器中打开链接** | 查看原文完整内容 | 在浏览器中打开，继续选择操作 |
| **0. 跳过** | 稍后处理 | 保持原状态 |

> 💡 **新功能**: 选项6允许你在浏览器中打开原文链接，查看完整内容后再决定如何分类

---

## 🔧 详细操作流程

### 1. 保持当前分类
```
请选择操作 (0-5): 1
✅ 已确认分类
```
- 自动添加 `manually_reviewed: true`
- 置信度提升至 `100%`
- 移除 `needs_review` 标记

### 2. 修改分类
```
请选择操作 (0-5): 2

可选分类:
  1. research
  2. developer
  3. product
  4. market
  5. leader
  6. community

请选择分类 (1-6, 0=取消): 1
✅ 分类已更新为: research
```

### 3. 修改技术领域
```
请选择操作 (0-5): 3

常用技术领域:
  1. NLP
  2. Computer Vision
  3. Reinforcement Learning
  4. Generative AI
  5. MLOps
  6. AI Ethics
  7. General AI

可以输入编号（用逗号分隔，如: 1,4）或直接输入名称
请输入: 1,4
✅ 技术领域已更新
```

支持的输入方式：
- **编号**: `1,4` → `['NLP', 'Generative AI']`
- **名称**: `NLP,Computer Vision` → `['NLP', 'Computer Vision']`
- **混合**: 支持自定义名称

### 4. 修改地区
```
请选择操作 (0-5): 4

可选地区:
  1. China
  2. USA
  3. Europe
  4. Global

请选择地区 (1-4, 0=取消): 2
✅ 地区已更新为: USA
```

### 5. 标记为垃圾
```
请选择操作 (0-5): 5
⚠️  确定要删除此内容吗? (Y/N): y
🗑️  已标记为垃圾内容
```

---

## 📊 批量审核模式

### 审核流程
1. 系统显示需要审核的内容数量
2. 逐条显示内容信息
3. 用户选择操作（1-5或0）
4. 每审核5条会询问是否继续

### 中途暂停
```
继续审核? (Y/N/Q-退出): n
⏸️  审核暂停，已完成 5/15 条
```

选项：
- **Y** - 继续审核
- **N/Q** - 暂停并保存进度

### 审核统计
```
======================================================================
📊 审核统计
======================================================================
审核数量: 15/15
修改分类: 3 条
删除垃圾: 1 条
剩余内容: 99 条
```

---

## 🔗 使用网页链接功能

### 为什么需要查看原文链接？

在审核过程中，有些情况下仅凭标题和摘要难以准确判断：

1. **标题模糊** - 标题没有清楚说明内容性质
2. **摘要不完整** - 摘要被截断或过于简略
3. **边界案例** - 内容跨越多个分类
4. **来源验证** - 需要确认信息来源的可靠性

### 如何使用

#### 步骤1：查看链接
审核界面会自动显示链接（如果有）：
```
标题: OpenAI Launches New Model
来源: TechCrunch
🔗 链接: https://techcrunch.com/2025/openai-new-model
```

#### 步骤2：打开链接
选择操作 **6** 在浏览器中打开：
```
请选择操作 (0-6): 6
🌐 已在浏览器中打开链接
   查看完内容后，继续选择操作...
```

#### 步骤3：阅读原文
浏览器会自动打开，你可以：
- 阅读完整文章内容
- 查看配图和数据
- 确认信息来源可靠性
- 了解更多上下文

#### 步骤4：返回终端
查看完成后，返回终端继续选择操作：
- 如果分类正确 → 选择 **1**（保持分类）
- 如果需要修改 → 选择 **2**（修改分类）
- 如果是垃圾内容 → 选择 **5**（标记删除）

### 实际示例

#### 案例1：标题不清晰
```
标题: "Company Announces Major Investment"
摘要: "Tech company reveals new plans..."
当前分类: product (置信度: 52%)

→ 打开链接查看
→ 发现是融资新闻，应该是 market
→ 选择 2 修改分类为 market
```

#### 案例2：验证垃圾内容
```
标题: "AI Breakthrough Claims Questioned"
摘要: "Experts doubt recent claims..."
当前分类: research (置信度: 48%)

→ 打开链接查看
→ 发现是假新闻或谣言
→ 选择 5 标记为垃圾
```

#### 案例3：确认分类
```
标题: "New Python Library for ML"
摘要: "Open source tool for developers..."
当前分类: developer (置信度: 58%)

→ 打开链接查看
→ 确认是开发者工具
→ 选择 1 保持分类
```

### 技术说明

- **支持字段**: `link` 或 `url`（自动检测）
- **浏览器**: 使用系统默认浏览器
- **操作系统**: 支持 Windows, macOS, Linux
- **无链接情况**: 选项6不显示

---

## 💾 数据保存

### 审核后的数据文件
```json
{
  "metadata": {
    "timestamp": "20251204_160839",
    "total_items": 99,
    "reviewed": true
  },
  "data": [
    {
      "title": "...",
      "content_type": "research",
      "confidence": 1.0,
      "manually_reviewed": true,
      "reviewed_at": "2025-12-04 16:08:39",
      "needs_review": false
    }
  ]
}
```

### 审核历史记录
自动保存到 `review_history_YYYYMMDD_HHMMSS.json`：

```json
[
  {
    "title": "OpenAI denies rumors...",
    "action": "修改分类: product → research",
    "timestamp": "2025-12-04 16:08:45"
  },
  {
    "title": "Startup might launch...",
    "action": "标记为垃圾",
    "timestamp": "2025-12-04 16:09:12"
  }
]
```

---

## 🎓 最佳实践

### 1. 审核优先级
```
高优先级（必须审核）:
  - 置信度 < 40%
  - 包含否定词且分类为产品/市场
  - 来源不明确

中优先级（建议审核）:
  - 置信度 40-60%
  - 有次要标签且分数接近

低优先级（可选审核）:
  - 置信度 60-80%
  - 边界案例但来源可信
```

### 2. 常见问题处理

**Q: 研究论文的GitHub实现应该分类为什么？**
- **主分类**: `developer`（GitHub强制规则）
- **次要标签**: `research`（已自动添加）
- **操作**: 保持当前分类即可

**Q: 传闻类新闻怎么处理？**
- 如果是明确的虚假信息 → 标记为垃圾
- 如果是未确认的传闻 → 保持分类，但注意置信度已降低
- 如果是否认传闻的官方声明 → 可能需要改为"leader"类

**Q: 小公司发布的产品置信度低怎么办？**
- 确认是正式发布 → 选择"保持分类"提升置信度
- 只是计划/可能发布 → 改为"market"类
- 内容质量差 → 标记为垃圾

### 3. 批量审核技巧
- **分批审核**: 每次审核5-10条，避免疲劳
- **先查看列表**: 先用选项3浏览，再决定是否批量审核
- **调整阈值**: 如果大部分都需要改，考虑优化分类算法而非全部人工修正

### 4. 审核记录管理
```bash
# 查看审核历史
cat review_history_20251204_160839.json

# 分析审核模式
# 如果发现某类错误频繁出现，应优化分类算法
```

---

## 🔄 审核后的工作流

```
1. 完成人工审核
   ↓
2. 保存审核后的数据
   ↓
3. 重新生成报告和可视化
   （回到主菜单选择选项1）
   ↓
4. 查看优化后的结果
   ↓
5. 分析审核历史，优化分类规则
```

---

## 🛠️ 高级功能

### 编程接口

```python
from manual_reviewer import ManualReviewer

reviewer = ManualReviewer()

# 获取需要审核的内容
review_items = reviewer.get_items_for_review(
    items=data,
    min_confidence=0.6,
    max_items=10  # 限制数量
)

# 审核单个内容
reviewed = reviewer.review_item(
    item=review_items[0],
    show_details=True
)

# 获取审核摘要
summary = reviewer.get_review_summary()
print(f"总审核数: {summary['total']}")
print(f"操作分布: {summary['actions']}")
```

### 自定义置信度阈值

不同场景建议不同阈值：

| 场景 | 阈值 | 说明 |
|-----|------|------|
| 严格质量控制 | 0.8 | 审核所有中低置信度内容 |
| 标准审核 | 0.6 | 默认值，审核低置信度内容 |
| 快速审核 | 0.4 | 只审核明显错误的分类 |
| 仅修正错误 | 0.3 | 只看极低置信度 |

---

## 📈 审核效果评估

### 审核前后对比
```
审核前:
  - 平均置信度: 67.3%
  - 需要审核: 15条 (15%)

审核后:
  - 平均置信度: 89.5%
  - 需要审核: 0条 (0%)
  - 修改分类: 3条
  - 删除垃圾: 1条
```

### 质量提升指标
- ✅ 平均置信度提升 **22.2%**
- ✅ 低质量内容减少 **100%**
- ✅ 分类准确率提高（通过人工验证）

---

## ⚡ 快速参考

### 快捷命令
```bash
# 启动主程序
python TheWorldOfAI.py

# 选择菜单 → 5 → 1 → 开始审核

# 常用操作:
1 - 确认    2 - 改分类    5 - 删除    0 - 跳过
```

### 键盘操作
- 数字键选择操作
- Y/N 确认或取消
- 逗号分隔多选项
- Enter 确认输入

---

## 🐛 故障排除

**问题**: 无法找到需要审核的内容
- **解决**: 检查是否已运行数据采集（菜单选项1）

**问题**: 修改后没有保存
- **解决**: 审核完成后选择"Y"保存数据

**问题**: 审核历史文件过多
- **解决**: 定期整理 `review_history_*.json` 文件

---

## 📚 相关文档

- [内容分类器改进说明](./CLASSIFIER_IMPROVEMENTS.md)
- [使用指南](./USAGE_GUIDE.md)
- [API文档](./README.md)

---

**最后更新**: 2025-12-04  
**版本**: v2.0 - 增强版
