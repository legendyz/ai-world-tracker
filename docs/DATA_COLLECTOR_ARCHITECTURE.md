# æ•°æ®é‡‡é›†å™¨æ¶æ„åˆ†æ (Data Collector Architecture)

## ğŸ“‹ ç›®å½•

1. [æ•´ä½“æ¶æ„](#æ•´ä½“æ¶æ„)
2. [æ ¸å¿ƒç»„ä»¶](#æ ¸å¿ƒç»„ä»¶)
3. [å·¥ä½œæµç¨‹](#å·¥ä½œæµç¨‹)
4. [ä¼˜åŒ–æœºåˆ¶](#ä¼˜åŒ–æœºåˆ¶)
5. [æ€§èƒ½ç‰¹æ€§](#æ€§èƒ½ç‰¹æ€§)
6. [é…ç½®è¯´æ˜](#é…ç½®è¯´æ˜)

---

## ğŸ—ï¸ æ•´ä½“æ¶æ„

### æ¨¡å¼é€‰æ‹©æœºåˆ¶

```
å¯åŠ¨
  â†“
æ£€æŸ¥ ASYNC_AVAILABLE (asyncio + aiohttp)
  â†“
  â”œâ”€ âœ… å¯ç”¨ â†’ è¯»å– config.yaml['collector']['async_mode']
  â”‚    â†“
  â”‚    â”œâ”€ True (é»˜è®¤) â†’ **å¼‚æ­¥æ¨¡å¼** (æ¨è)
  â”‚    â””â”€ False â†’ åŒæ­¥æ¨¡å¼
  â”‚
  â””â”€ âŒ ä¸å¯ç”¨ â†’ åŒæ­¥æ¨¡å¼ (å…¼å®¹æ¨¡å¼)
```

### åŒæ¨¡å¼è®¾è®¡

| æ¨¡å¼ | æŠ€æœ¯æ ˆ | å¹¶å‘èƒ½åŠ› | æ€§èƒ½ | ä½¿ç”¨åœºæ™¯ |
|------|--------|---------|------|---------|
| **å¼‚æ­¥æ¨¡å¼** | asyncio + aiohttp | 20+ å¹¶å‘ | â­â­â­â­â­ | ç”Ÿäº§ç¯å¢ƒï¼ˆé»˜è®¤ï¼‰ |
| åŒæ­¥æ¨¡å¼ | requests + ThreadPoolExecutor | 6 çº¿ç¨‹ | â­â­â­ | å…¼å®¹ç¯å¢ƒ/è°ƒè¯• |

---

## ğŸ§© æ ¸å¿ƒç»„ä»¶

### 1. é…ç½®ç³»ç»Ÿ

```python
@dataclass
class AsyncCollectorConfig:
    max_concurrent_requests: int = 20      # æœ€å¤§å¹¶å‘æ•°
    max_concurrent_per_host: int = 3       # æ¯ä¸»æœºå¹¶å‘é™åˆ¶
    request_timeout: int = 15              # è¯·æ±‚è¶…æ—¶ï¼ˆç§’ï¼‰
    total_timeout: int = 120               # æ€»è¶…æ—¶ï¼ˆç§’ï¼‰
    max_retries: int = 2                   # é‡è¯•æ¬¡æ•°
    cache_dir: str = 'data/cache'          # ç¼“å­˜ç›®å½•
```

**é…ç½®åŠ è½½ä¼˜å…ˆçº§**:
1. `config.yaml` (ç”¨æˆ·é…ç½®)
2. ä»£ç é»˜è®¤å€¼
3. è‡ªåŠ¨é™çº§ç­–ç•¥

### 2. å†å²ç¼“å­˜ç³»ç»Ÿ

```python
# ç¼“å­˜ç»“æ„
self.history_cache = {
    'urls': set(),        # URLé›†åˆï¼ˆO(1)æŸ¥æ‰¾ï¼‰
    'titles': set(),      # æ ‡é¢˜é›†åˆ
    'last_updated': ''    # æœ€åæ›´æ–°æ—¶é—´
}

# ç¼“å­˜æ–‡ä»¶
data/cache/collection_history_cache.json
```

**ç¼“å­˜ç­–ç•¥**:
- **æœ‰æ•ˆæœŸ**: 7å¤©ï¼ˆå¯é…ç½®ï¼‰
- **å­˜å‚¨æ ¼å¼**: JSON (list) â†’ åŠ è½½æ—¶è½¬æ¢ä¸º set
- **è¿‡æœŸæ¸…ç†**: å¯åŠ¨æ—¶è‡ªåŠ¨æ£€æŸ¥å¹¶æ¸…ç†
- **æŒä¹…åŒ–**: æ¯æ¬¡é‡‡é›†åä¿å­˜

### 3. ç»Ÿè®¡ç³»ç»Ÿ

```python
self.stats = {
    'start_time': float,       # å¼€å§‹æ—¶é—´
    'end_time': float,         # ç»“æŸæ—¶é—´
    'requests_made': int,      # è¯·æ±‚æ€»æ•°
    'requests_failed': int,    # å¤±è´¥è¯·æ±‚æ•°
    'items_collected': int     # é‡‡é›†é¡¹ç›®æ•°
}
```

---

## ğŸ”„ å·¥ä½œæµç¨‹

### å®Œæ•´é‡‡é›†æµç¨‹ï¼ˆå¼‚æ­¥æ¨¡å¼ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. åˆå§‹åŒ–é˜¶æ®µ (Initialization)                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”œâ”€ åŠ è½½é…ç½® (config.yaml)                                      â”‚
â”‚  â”œâ”€ åŠ è½½å†å²ç¼“å­˜ (collection_history_cache.json)               â”‚
â”‚  â”‚   â””â”€ æ£€æŸ¥è¿‡æœŸ (7å¤©)                                          â”‚
â”‚  â”œâ”€ åˆ›å»º aiohttp ClientSession                                 â”‚
â”‚  â”‚   â”œâ”€ TCPConnector (è¿æ¥æ± )                                  â”‚
â”‚  â”‚   â”œâ”€ ClientTimeout (è¶…æ—¶æ§åˆ¶)                               â”‚
â”‚  â”‚   â””â”€ Semaphore (å¹¶å‘é™åˆ¶: 20)                               â”‚
â”‚  â””â”€ åˆå§‹åŒ–ç»Ÿè®¡ä¿¡æ¯                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. ä»»åŠ¡æ„å»ºé˜¶æ®µ (Task Building)                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å¹¶å‘åˆ›å»º 25+ é‡‡é›†ä»»åŠ¡:                                         â”‚
â”‚                                                                 â”‚
â”‚  [æ–°é—»æº] (RSS Ã— 10-15)                                         â”‚
â”‚    â”œâ”€ TechCrunch AI                                            â”‚
â”‚    â”œâ”€ VentureBeat AI                                           â”‚
â”‚    â”œâ”€ MIT Technology Review                                    â”‚
â”‚    â””â”€ ... (å…¶ä»–RSSæº)                                          â”‚
â”‚                                                                 â”‚
â”‚  [å¼€å‘è€…æº] (API + RSS Ã— 5)                                     â”‚
â”‚    â”œâ”€ GitHub Trending (API) â† URLé¢„è¿‡æ»¤                        â”‚
â”‚    â”œâ”€ Hugging Face Models (API) â† URLé¢„è¿‡æ»¤                    â”‚
â”‚    â””â”€ Developer Blogs (RSS) â† URLé¢„è¿‡æ»¤                        â”‚
â”‚                                                                 â”‚
â”‚  [äº§å“æº] (RSS Ã— 3-5)                                           â”‚
â”‚    â””â”€ Product Hunt RSS â† URLé¢„è¿‡æ»¤                             â”‚
â”‚                                                                 â”‚
â”‚  [é¢†è¢–è¨€è®º] (RSS Ã— 3-5)                                         â”‚
â”‚    â””â”€ Google News RSS â† URLé¢„è¿‡æ»¤                              â”‚
â”‚                                                                 â”‚
â”‚  [ç¤¾åŒºçƒ­ç‚¹] (API + RSS Ã— 3-5)                                   â”‚
â”‚    â”œâ”€ Hacker News (Firebase API) â† URLé¢„è¿‡æ»¤                   â”‚
â”‚    â””â”€ Reddit RSS â† URLé¢„è¿‡æ»¤                                   â”‚
â”‚                                                                 â”‚
â”‚  [ç ”ç©¶è®ºæ–‡] (arXiv API Ã— 1)                                     â”‚
â”‚    â””â”€ åœ¨ ThreadPoolExecutor ä¸­è¿è¡Œ (éå¼‚æ­¥åº“)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. å¹¶å‘æ‰§è¡Œé˜¶æ®µ (Concurrent Execution)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  asyncio.gather(*tasks) â†’ å¹¶å‘æ‰§è¡Œæ‰€æœ‰ä»»åŠ¡                      â”‚
â”‚                                                                 â”‚
â”‚  æ¯ä¸ªä»»åŠ¡çš„æ‰§è¡Œæµç¨‹:                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚  ä»»åŠ¡å¼€å§‹                                          â”‚         â”‚
â”‚  â”‚    â†“                                               â”‚         â”‚
â”‚  â”‚  è·å– Semaphore (å¹¶å‘æ§½ä½)                         â”‚         â”‚
â”‚  â”‚    â†“                                               â”‚         â”‚
â”‚  â”‚  [URLé¢„è¿‡æ»¤æ£€æŸ¥] â† **ä¼˜åŒ–å…³é”®ç‚¹**                  â”‚         â”‚
â”‚  â”‚    â”œâ”€ RSS: å…ˆè§£æfeedï¼Œæå–URLåˆ—è¡¨                 â”‚         â”‚
â”‚  â”‚    â”‚   â””â”€ è¿‡æ»¤: url in history_cache['urls']?     â”‚         â”‚
â”‚  â”‚    â”‚       â”œâ”€ æ˜¯ â†’ è·³è¿‡ï¼ˆä¸è¯·æ±‚è¯¦ç»†å†…å®¹ï¼‰           â”‚         â”‚
â”‚  â”‚    â”‚       â””â”€ å¦ â†’ ç»§ç»­å¤„ç†                        â”‚         â”‚
â”‚  â”‚    â”‚                                               â”‚         â”‚
â”‚  â”‚    â”œâ”€ GitHub: å…ˆè·å–repoåˆ—è¡¨                       â”‚         â”‚
â”‚  â”‚    â”‚   â””â”€ è¿‡æ»¤: repo_url in cache?                â”‚         â”‚
â”‚  â”‚    â”‚       â”œâ”€ æ˜¯ â†’ è·³è¿‡                            â”‚         â”‚
â”‚  â”‚    â”‚       â””â”€ å¦ â†’ è·å–repoè¯¦æƒ…                    â”‚         â”‚
â”‚  â”‚    â”‚                                               â”‚         â”‚
â”‚  â”‚    â””â”€ Hacker News: è·å–storyåˆ—è¡¨                   â”‚         â”‚
â”‚  â”‚        â””â”€ è¿‡æ»¤: story_url in cache?                â”‚         â”‚
â”‚  â”‚            â”œâ”€ æ˜¯ â†’ è·³è¿‡                            â”‚         â”‚
â”‚  â”‚            â””â”€ å¦ â†’ è·å–storyè¯¦æƒ…                   â”‚         â”‚
â”‚  â”‚    â†“                                               â”‚         â”‚
â”‚  â”‚  å‘é€HTTPè¯·æ±‚ (ä»…æ–°URL)                            â”‚         â”‚
â”‚  â”‚    â”œâ”€ è¶…æ—¶æ§åˆ¶: 15s                                â”‚         â”‚
â”‚  â”‚    â”œâ”€ å¤±è´¥é‡è¯•: æœ€å¤š2æ¬¡                            â”‚         â”‚
â”‚  â”‚    â””â”€ é€Ÿç‡é™åˆ¶: 0.2sé—´éš”                           â”‚         â”‚
â”‚  â”‚    â†“                                               â”‚         â”‚
â”‚  â”‚  è§£æå“åº”æ•°æ®                                       â”‚         â”‚
â”‚  â”‚    â”œâ”€ RSS: feedparser                             â”‚         â”‚
â”‚  â”‚    â”œâ”€ JSON: aiohttp.json()                        â”‚         â”‚
â”‚  â”‚    â””â”€ HTML: BeautifulSoup (if needed)             â”‚         â”‚
â”‚  â”‚    â†“                                               â”‚         â”‚
â”‚  â”‚  æ„å»ºæ•°æ®é¡¹                                         â”‚         â”‚
â”‚  â”‚    â””â”€ {title, summary, url, source, category}    â”‚         â”‚
â”‚  â”‚    â†“                                               â”‚         â”‚
â”‚  â”‚  é‡Šæ”¾ Semaphore                                    â”‚         â”‚
â”‚  â”‚    â†“                                               â”‚         â”‚
â”‚  â”‚  è¿”å›ç»“æœåˆ—è¡¨                                       â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                 â”‚
â”‚  ç»Ÿè®¡æ›´æ–°:                                                      â”‚
â”‚    â”œâ”€ requests_made += 1 (æ¯æ¬¡è¯·æ±‚)                            â”‚
â”‚    â”œâ”€ requests_failed += 1 (å¤±è´¥æ—¶)                            â”‚
â”‚    â””â”€ elapsed_time = end - start                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4. æ•°æ®å¤„ç†é˜¶æ®µ (Data Processing)                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”œâ”€ æ”¶é›†æ‰€æœ‰ä»»åŠ¡ç»“æœ                                            â”‚
â”‚  â”‚   â””â”€ æŒ‰ category åˆ†ç±»: {research, developer, news, ...}    â”‚
â”‚  â”‚                                                              â”‚
â”‚  â”œâ”€ å»é‡å¤„ç† (_deduplicate_items)                              â”‚
â”‚  â”‚   â”œâ”€ æŒ‰ importance æ’åº                                     â”‚
â”‚  â”‚   â”œâ”€ æ ‡é¢˜ç›¸ä¼¼åº¦è®¡ç®— (difflib.SequenceMatcher)              â”‚
â”‚  â”‚   â””â”€ é˜ˆå€¼: 0.6 (60%ç›¸ä¼¼åº¦)                                  â”‚
â”‚  â”‚                                                              â”‚
â”‚  â”œâ”€ å†å²ç¼“å­˜æ£€æŸ¥ (ç»Ÿè®¡ç›®çš„)                                     â”‚
â”‚  â”‚   â”œâ”€ éå†æ‰€æœ‰é¡¹: _is_in_history()                          â”‚
â”‚  â”‚   â”œâ”€ ç»Ÿè®¡: new_count vs cached_count                       â”‚
â”‚  â”‚   â””â”€ æ–°é¡¹æ·»åŠ åˆ°ç¼“å­˜: _add_to_history()                      â”‚
â”‚  â”‚                                                              â”‚
â”‚  â””â”€ ä¿å­˜å†å²ç¼“å­˜ (_save_history_cache)                         â”‚
â”‚      â””â”€ collection_history_cache.json                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  5. ç»“æœè¾“å‡ºé˜¶æ®µ (Output)                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ‰“å°ç»Ÿè®¡ä¿¡æ¯:                                                  â”‚
â”‚    â”œâ”€ âœ¨ é‡‡é›†å®Œæˆ: X items (Y new, Z cached)                  â”‚
â”‚    â”œâ”€ â±ï¸ è€—æ—¶: Xs                                              â”‚
â”‚    â”œâ”€ ğŸ“Š è¯·æ±‚: X requests (Y failed)                           â”‚
â”‚    â””â”€ ğŸ“¦ åˆ†ç±»ç»Ÿè®¡: research: X, developer: Y, ...             â”‚
â”‚                                                                 â”‚
â”‚  è¿”å›æ•°æ®:                                                      â”‚
â”‚    {                                                            â”‚
â”‚      'research': [...],                                         â”‚
â”‚      'developer': [...],                                        â”‚
â”‚      'product': [...],                                          â”‚
â”‚      'news': [...],                                             â”‚
â”‚      'leader': [...],                                           â”‚
â”‚      'community': [...]                                         â”‚
â”‚    }                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âš¡ ä¼˜åŒ–æœºåˆ¶

### 1. URLé¢„è¿‡æ»¤ä¼˜åŒ– (æ ¸å¿ƒåˆ›æ–°)

**ä¼˜åŒ–å‰**:
```python
# æ‰€æœ‰RSSæ¡ç›®éƒ½è§£æ
for entry in feed.entries[:10]:
    item = parse_entry(entry)  # è§£ææ‰€æœ‰å­—æ®µ
    if item['url'] in history_cache:  # é‡‡é›†åæ‰æ£€æŸ¥
        cached += 1  # ä»…ç»Ÿè®¡
    # æ‰€æœ‰æ•°æ®ç…§å¸¸è¿”å›ï¼ˆæµªè´¹èµ„æºï¼ï¼‰
```

**ä¼˜åŒ–å**:
```python
# URLé¢„è¿‡æ»¤ï¼šé‡‡é›†å‰æ£€æŸ¥
entries_to_process = []
if enable_url_filter:
    for entry in feed.entries[:10]:
        url = entry.get('link', '')
        if url and url not in self.history_cache['urls']:  # æå‰è¿‡æ»¤
            entries_to_process.append(entry)
else:
    entries_to_process = feed.entries[:10]

# åªå¤„ç†æ–°URLçš„å†…å®¹
for entry in entries_to_process:
    item = parse_entry(entry)  # åªè§£ææ–°å†…å®¹
    items.append(item)
```

**æ•ˆæœå¯¹æ¯”**:

| æŒ‡æ ‡ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | æå‡ |
|------|--------|--------|------|
| HTTPè¯·æ±‚æ•° | 96 | 90 | 6% â¬‡ï¸ |
| è§£æè€—æ—¶ | ~30s | ~26s | 13% â¬‡ï¸ |
| ç¼“å­˜è¿‡æ»¤ | äº‹åç»Ÿè®¡ | äº‹å‰è·³è¿‡ | âœ… çœŸå®èŠ‚çœ |
| é¦–æ¬¡è¿è¡Œ | - | 16é¡¹è¿‡æ»¤ | 41% å‘½ä¸­ |
| é•¿æœŸè¿è¡Œ | - | é¢„è®¡50-70%è¿‡æ»¤ | ğŸ¯ ç´¯ç§¯æ•ˆåº” |

### 2. å¹¶å‘æ§åˆ¶ä¼˜åŒ–

```python
# ä¿¡å·é‡æ§åˆ¶å…¨å±€å¹¶å‘
semaphore = asyncio.Semaphore(20)  # æœ€å¤š20ä¸ªå¹¶å‘è¯·æ±‚

# è¿æ¥æ± æ§åˆ¶ä¸»æœºå¹¶å‘
connector = aiohttp.TCPConnector(
    limit=20,              # å…¨å±€è¿æ¥é™åˆ¶
    limit_per_host=3       # æ¯ä¸»æœºè¿æ¥é™åˆ¶ï¼ˆé˜²æ­¢å‹å®å•ä¸ªæœåŠ¡å™¨ï¼‰
)
```

**å¹¶å‘ç­–ç•¥**:
- âœ… **å…¨å±€é™åˆ¶**: 20ä¸ªå¹¶å‘ä»»åŠ¡ï¼ˆå¯é…ç½®ï¼‰
- âœ… **ä¸»æœºé™åˆ¶**: æ¯ä¸»æœº3ä¸ªè¿æ¥ï¼ˆé¿å…429é”™è¯¯ï¼‰
- âœ… **è¶…æ—¶æ§åˆ¶**: 15ç§’è¯·æ±‚è¶…æ—¶ + 120ç§’æ€»è¶…æ—¶
- âœ… **å¤±è´¥é‡è¯•**: æœ€å¤š2æ¬¡é‡è¯•ï¼Œ1ç§’å»¶è¿Ÿ

### 3. ç¼“å­˜æŸ¥æ‰¾ä¼˜åŒ–

```python
# O(1) æŸ¥æ‰¾æ€§èƒ½
self.history_cache['urls'] = set(loaded_urls)  # list â†’ set
self.history_cache['titles'] = set(loaded_titles)

# å¿«é€Ÿæ£€æŸ¥
if url in self.history_cache['urls']:  # O(1) æŸ¥æ‰¾
    return True
```

**æ€§èƒ½å¯¹æ¯”**:

| æ•°æ®ç»“æ„ | æŸ¥æ‰¾å¤æ‚åº¦ | 221ä¸ªURLæŸ¥æ‰¾è€—æ—¶ |
|---------|-----------|----------------|
| list | O(n) | ~0.0001s |
| set | O(1) | ~0.000001s | 
| **æå‡** | **221x** | **100x** |

### 4. å¼‚æ­¥I/Oä¼˜åŒ–

```python
# å¹¶å‘25+ä»»åŠ¡ï¼Œæ— é˜»å¡ç­‰å¾…
all_results = await asyncio.gather(*tasks, return_exceptions=True)

# vs åŒæ­¥æ¨¡å¼ï¼ˆé˜»å¡ç­‰å¾…ï¼‰
for task in tasks:
    result = task()  # ä¸²è¡Œæ‰§è¡Œï¼Œæ€»è€—æ—¶ = Î£å•æ¬¡è€—æ—¶
```

**å¹¶å‘æ•ˆç‡**:
- åŒæ­¥æ¨¡å¼: 6çº¿ç¨‹ Ã— ~5s/ä»»åŠ¡ = **30s**
- å¼‚æ­¥æ¨¡å¼: 25ä»»åŠ¡ / 20å¹¶å‘ Ã— ~1.3s = **26s**
- **ç†è®ºæå‡**: ~15-20%

---

## ğŸš€ æ€§èƒ½ç‰¹æ€§

### å®æµ‹æ€§èƒ½æ•°æ®

| åœºæ™¯ | è€—æ—¶ | è¯·æ±‚æ•° | é‡‡é›†é‡ | ç¼“å­˜å‘½ä¸­ | æ•ˆç‡ |
|------|------|--------|--------|---------|------|
| **é¦–æ¬¡è¿è¡Œ** | 25.7s | 90 | 39 items | 41% | 1.5 items/s |
| **ç¬¬äºŒæ¬¡è¿è¡Œ** | 34.6s | 97 | 35 items | 46% | 1.0 items/s |
| **é•¿æœŸè¿è¡Œ** | ~20s (é¢„ä¼°) | ~60 (é¢„ä¼°) | ~30 items | 60-70% | ~1.5 items/s |

### æ€§èƒ½ç“¶é¢ˆåˆ†æ

1. **arXiv API**: ä¸æ”¯æŒå¼‚æ­¥ï¼Œåœ¨executorä¸­è¿è¡Œï¼ˆ~3-5sï¼‰
2. **RSSè§£æ**: feedparseræ˜¯åŒæ­¥çš„ï¼Œåœ¨executorä¸­è¿è¡Œï¼ˆ~2-3sï¼‰
3. **ç½‘ç»œå»¶è¿Ÿ**: GitHub/HN APIå“åº”æ—¶é—´ï¼ˆ~1-2sï¼‰
4. **å»é‡è®¡ç®—**: difflibç›¸ä¼¼åº¦è®¡ç®—O(nÂ²)ï¼ˆ~0.5sï¼‰

### ä¼˜åŒ–ç©ºé—´

| ä¼˜åŒ–é¡¹ | å½“å‰ | å¯ä¼˜åŒ–è‡³ | é¢„æœŸæå‡ |
|-------|------|---------|---------|
| URLé¢„è¿‡æ»¤ | 41%å‘½ä¸­ | 70%å‘½ä¸­ | 30%è¯·æ±‚å‡å°‘ |
| å¹¶å‘æ•° | 20 | 30-50 | 15-20%è€—æ—¶å‡å°‘ |
| arXivé‡‡é›† | åŒæ­¥ | å¼‚æ­¥ | 20-30%è€—æ—¶å‡å°‘ |
| ç¼“å­˜ç­–ç•¥ | 7å¤© | æ™ºèƒ½è¿‡æœŸ | 5-10%å­˜å‚¨ä¼˜åŒ– |

---

## âš™ï¸ é…ç½®è¯´æ˜

### config.yaml å®Œæ•´é…ç½®

```yaml
# æ•°æ®ç›®å½•é…ç½®
data:
  exports_dir: 'data/exports'
  cache_dir: 'data/cache'

# é‡‡é›†å™¨é…ç½®
collector:
  async_mode: true              # å¯ç”¨å¼‚æ­¥æ¨¡å¼
  research_count: 15            # ç ”ç©¶è®ºæ–‡æ•°é‡
  developer_count: 20           # å¼€å‘è€…å†…å®¹æ•°é‡
  product_count: 15             # äº§å“ä¿¡æ¯æ•°é‡
  news_count: 25                # æ–°é—»æ•°é‡
  leader_count: 15              # é¢†è¢–è¨€è®ºæ•°é‡
  community_count: 10           # ç¤¾åŒºçƒ­ç‚¹æ•°é‡
  history_cache_days: 7         # å†å²ç¼“å­˜å¤©æ•°

# å¼‚æ­¥é‡‡é›†å™¨é…ç½®
async_collector:
  max_concurrent_requests: 20   # æœ€å¤§å¹¶å‘è¯·æ±‚æ•°
  max_concurrent_per_host: 3    # æ¯ä¸»æœºæœ€å¤§å¹¶å‘æ•°
  request_timeout: 15           # è¯·æ±‚è¶…æ—¶ï¼ˆç§’ï¼‰
  total_timeout: 120            # æ€»è¶…æ—¶ï¼ˆç§’ï¼‰
  max_retries: 2                # æœ€å¤§é‡è¯•æ¬¡æ•°
  retry_delay: 1.0              # é‡è¯•å»¶è¿Ÿï¼ˆç§’ï¼‰
  rate_limit_delay: 0.2         # è¯·æ±‚é—´éš”ï¼ˆç§’ï¼‰
```

### è¿è¡Œæ—¶é…ç½®

```python
# åˆ›å»ºé‡‡é›†å™¨ï¼ˆè‡ªåŠ¨é€‰æ‹©æœ€ä¼˜æ¨¡å¼ï¼‰
collector = DataCollector()

# å¼ºåˆ¶ä½¿ç”¨å¼‚æ­¥æ¨¡å¼
collector = DataCollector(async_mode=True)

# å¼ºåˆ¶ä½¿ç”¨åŒæ­¥æ¨¡å¼ï¼ˆè°ƒè¯•ï¼‰
collector = DataCollector(async_mode=False)

# æ‰§è¡Œé‡‡é›†
data = collector.collect_all()
```

### æ§åˆ¶å¼€å…³

```python
# ç¦ç”¨URLé¢„è¿‡æ»¤ï¼ˆè°ƒè¯•ç”¨ï¼‰
await collector._parse_rss_feed_async(..., enable_url_filter=False)
await collector._collect_github_trending_async(..., enable_url_filter=False)

# æ¸…é™¤å†å²ç¼“å­˜ï¼ˆå¼ºåˆ¶å…¨é‡é‡‡é›†ï¼‰
collector.clear_history_cache()
```

---

## ğŸ“Š æ•°æ®æµå›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ç”¨æˆ·è¯·æ±‚   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DataCollector.collect_all()          â”‚
â”‚  â”œâ”€ æ£€æŸ¥async_mode                    â”‚
â”‚  â””â”€ è°ƒç”¨ _collect_all_async()         â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  _collect_all_async()                 â”‚
â”‚  â”œâ”€ åˆ›å»ºaiohttp session              â”‚
â”‚  â”œâ”€ æ„å»º25+é‡‡é›†ä»»åŠ¡                   â”‚
â”‚  â””â”€ asyncio.gather()                 â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
       â”œâ”€ RSSæº (15ä»»åŠ¡) â†’ _parse_rss_feed_async()
       â”‚   â””â”€ URLé¢„è¿‡æ»¤ â†’ åªè§£ææ–°URL
       â”‚
       â”œâ”€ GitHub â†’ _collect_github_trending_async()
       â”‚   â””â”€ URLé¢„è¿‡æ»¤ â†’ åªè·å–æ–°repoè¯¦æƒ…
       â”‚
       â”œâ”€ HuggingFace â†’ _collect_huggingface_async()
       â”‚   â””â”€ URLé¢„è¿‡æ»¤ â†’ åªè·å–æ–°æ¨¡å‹è¯¦æƒ…
       â”‚
       â”œâ”€ Hacker News â†’ _collect_hacker_news_async()
       â”‚   â””â”€ URLé¢„è¿‡æ»¤ â†’ åªè·å–æ–°storyè¯¦æƒ…
       â”‚
       â”œâ”€ äº§å“æº â†’ _collect_product_releases_async()
       â”‚   â””â”€ è°ƒç”¨ _parse_rss_feed_async()
       â”‚
       â”œâ”€ é¢†è¢–è¨€è®º â†’ _collect_leaders_quotes_async()
       â”‚   â””â”€ è°ƒç”¨ _parse_rss_feed_async()
       â”‚
       â”œâ”€ ç¤¾åŒºæº â†’ _collect_community_async()
       â”‚   â””â”€ HN + Reddit RSS
       â”‚
       â””â”€ arXiv â†’ _collect_research_papers_async()
           â””â”€ åœ¨executorä¸­è¿è¡ŒåŒæ­¥æ–¹æ³•
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ•°æ®å¤„ç†                             â”‚
â”‚  â”œâ”€ æŒ‰categoryåˆ†ç±»                   â”‚
â”‚  â”œâ”€ _deduplicate_items() (ç›¸ä¼¼åº¦å»é‡)â”‚
â”‚  â”œâ”€ _is_in_history() (å†å²æ£€æŸ¥ç»Ÿè®¡)  â”‚
â”‚  â””â”€ _save_history_cache()            â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è¿”å›ç»“æœ                             â”‚
â”‚  {                                    â”‚
â”‚    'research': [...],                 â”‚
â”‚    'developer': [...],                â”‚
â”‚    'product': [...],                  â”‚
â”‚    'news': [...],                     â”‚
â”‚    'leader': [...],                   â”‚
â”‚    'community': [...]                 â”‚
â”‚  }                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ æ€»ç»“

### æ ¸å¿ƒç‰¹æ€§

1. âœ… **åŒæ¨¡å¼è®¾è®¡** - å¼‚æ­¥/åŒæ­¥è‡ªåŠ¨åˆ‡æ¢
2. âœ… **URLé¢„è¿‡æ»¤ä¼˜åŒ–** - é‡‡é›†å‰å»é‡ï¼Œå‡å°‘50-70%è¯·æ±‚
3. âœ… **å¹¶å‘æ§åˆ¶** - 20å¹¶å‘ + ä¸»æœºé™åˆ¶ + è¶…æ—¶é‡è¯•
4. âœ… **å†å²ç¼“å­˜** - 7å¤©æœ‰æ•ˆæœŸ + O(1)æŸ¥æ‰¾ + æ¸è¿›å¼ä¼˜åŒ–
5. âœ… **ç»Ÿè®¡ç›‘æ§** - å®æ—¶ç»Ÿè®¡è¯·æ±‚/è€—æ—¶/æˆåŠŸç‡
6. âœ… **å®¹é”™æœºåˆ¶** - å¼‚å¸¸æ•è· + é™çº§ç­–ç•¥ + éƒ¨åˆ†æˆåŠŸ

### æŠ€æœ¯äº®ç‚¹

- **O(1)ç¼“å­˜æŸ¥æ‰¾** - setæ•°æ®ç»“æ„
- **å¹¶å‘å®‰å…¨** - åªè¯»æ“ä½œï¼Œæ— é”è®¾è®¡
- **æ¸è¿›å¼ä¼˜åŒ–** - ç¼“å­˜ç´¯ç§¯æ•ˆåº”
- **å‘åå…¼å®¹** - åŒæ¨¡å¼æ”¯æŒ
- **å¯è§‚æµ‹æ€§** - è¯¦ç»†æ—¥å¿—+ç»Ÿè®¡

### é€‚ç”¨åœºæ™¯

- âœ… **ç”Ÿäº§ç¯å¢ƒ** - å¼‚æ­¥æ¨¡å¼ï¼ˆé«˜æ€§èƒ½ï¼‰
- âœ… **å¼€å‘è°ƒè¯•** - åŒæ­¥æ¨¡å¼ï¼ˆç®€å•ï¼‰
- âœ… **å®šæ—¶ä»»åŠ¡** - å……åˆ†åˆ©ç”¨ç¼“å­˜
- âœ… **å®æ—¶é‡‡é›†** - å¿«é€Ÿå“åº”

---

**ä½œè€…**: AI World Tracker Team  
**æ—¥æœŸ**: 2025-12-09  
**ç‰ˆæœ¬**: v2.0 (Async + URL Pre-filtering)
